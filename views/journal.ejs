<%- include('partials/header', { pageTitle: 'Journal de Bord' }) %>

<h1>Journal de Bord</h1>
<nav>
    <% if (locals.username) { %>
        <a href="/journal/nouvelle">Ajouter une entrée</a> | 
    <% } %>
    <a href="/">Retour à l'accueil</a>
</nav>
<hr>

<div class="entries-grid">

    <% articles.forEach(entry => { %>
        <article class="entry-card">

            <% if (entry.coverImage) { %>
                <a href="/entree/<%= entry.id %>" class="card-image-link">
                    <img src="<%= entry.coverImage %>" alt="<%= entry.title %>" class="cover-image">
                </a>
            <% } %>
            
            <div class="card-body">
                <h2><a href="/entree/<%= entry.id %>"><%= entry.title %></a></h2>
                <small>Publié le: <%= new Date(entry.publication_date).toLocaleString('fr-FR') %></small>
                
                <% if (locals.username) { %>
                    <div class="actions">
                        <a href="/entree/<%= entry.id %>/edit">Modifier</a>
                        <form action="/entree/<%= entry.id %>/delete" method="POST">
                            <button type="submit">Supprimer</button>
                        </form>
                    </div>
                <% } %>
            </div>

        </article>
    <% }); %>

</div> <%- include('partials/footer') %>