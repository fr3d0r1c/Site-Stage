<%- include('partials/header', { pageTitle: 'Modifier : ' + article.title }) %>

<h1>Modifier l'entrée</h1>

<form action="/entree/<%= article.id %>/edit" method="POST">
    <div>
        <label for="title">Titre :</label><br>
        <input type="text" id="title" name="title" value="<%= article.title %>" required>
    </div>

    <div class="editor-container">
        <div class="editor-pane">
            <label for="content-editor">Contenu (Markdown) :</label><br>
            
            <button type="button" id="upload-image-btn" class="editor-tool-btn">
                Téléverser une image
            </button>
            <button type="button" id="add-url-image-btn" class="editor-tool-btn">
                Ajouter par URL
            </button>
            
            <textarea id="content-editor" name="content" rows="20" required><%= article.content %></textarea>
        </div>
        <div class="preview-pane">
            <label>Aperçu :</label><br>
            <div id="content-preview" class="article-content"></div>
        </div>
    </div>

    <input type="file" id="image-upload-input" style="display: none;" accept="image/*">

    <div>
        <label for="cover_image_url">URL de l'image de couverture (optionnel) :</label><br>
        <input type="text" id="cover_image_url" name="cover_image_url" placeholder="Collez l'URL d'une image ici..." value="<%= article.cover_image_url || '' %>">
        <small>Astuce : Uploadez une image dans le contenu, puis copiez son URL ici.</small>
    </div>

    <div>
        <button type="submit">Mettre à jour</button>
    </div>
</form>

<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="/js/editor.js"></script>
<script src="/js/uploader.js"></script>

<%- include('partials/footer') %>