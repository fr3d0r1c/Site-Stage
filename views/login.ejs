<%- include('partials/header', { pageTitle: pageTitle }) %>

<h1><%= t('auth.login_title') %></h1>

<%# Affiche un message de succès si on vient de réinitialiser le mot de passe %>
<% if (locals.resetSuccess) { %>
    <p class="feedback-message success">Votre mot de passe a été réinitialisé avec succès ! Vous pouvez maintenant vous connecter.</p>
<% } %>

<%# Affiche les erreurs de connexion (ex: "mot de passe incorrect") %>
<% if (error) { %>
    <p class="error-message"><%= error %></p>
<% } %>

<form action="/connexion" method="POST">
    <div class="form-group">
        <label for="username"><%= t('forms.username') %> :</label><br>
        <input type="text" id="username" name="username" required>
    </div>

    <div class="form-group password-container">
        <label for="password"><%= t('forms.password') %> :</label><br>
        <div style="position: relative;">
            <input type="password" id="password" name="password" required>
            <i class="fas fa-eye toggle-password-icon" id="togglePassword"></i>
        </div>
    </div>

    <div>
        <button type="submit"><%= t('forms.login_button') %></button>
    </div>
</form>

<p style="margin-top: 1rem;"><a href="/forgot-password"><%= t('auth.forgot_password_link') %></a></p>

<% if (!adminExists) { %>
    <p><%= t('auth.no_admin') %> <a href="/inscription"><%= t('auth.create_now') %></a>.</p>
<% } %>

<%- include('partials/footer') %>

<script src="/js/auth-ui.js"></script>