<%- include('partials/header', { pageTitle: pageTitle }) %>

<article class="full-article">
    <h1><%= article.title %></h1>
    <small><%= t('journal.published_on') %>: <%= new Date(article.publication_date).toLocaleString(i18n.language) %></small>

    <%# Affiche les tags pour cet article %>
    <% if (article.tags && article.tags.length > 0) { %>
        <div class="tags-list entry-tags">
            <% article.tags.forEach(tag => { %>
                <a href="/tags/<%= tag %>" class="tag-item"><%= tag %></a>
            <% }); %>
        </div>
    <% } %>

    <hr>
    
    <%# Affiche le contenu (converti de Markdown en HTML par le serveur) %>
    <div class="article-content"><%- article.content %></div>

    <%# Affiche les boutons Modifier/Supprimer si l'admin est connecté %>
    <% if (locals.username) { %>
         <div class="actions" style="margin-top: 2rem; border-top: 1px solid var(--c-border); padding-top: 1.5rem;">
             <a href="/entree/<%= article.id %>/edit"><%= t('journal.edit') %></a>
             <form action="/entree/<%= article.id %>/delete" method="POST" 
                   onsubmit="return confirm('<%= t('admin_page.delete_confirm', 'Voulez-vous vraiment supprimer cette entrée ?') %>');" 
                   style="display: inline;">
                 <button type="submit"><%= t('journal.delete') %></button>
             </form>
         </div>
     <% } %>

</article>

<nav class="prev-next-nav">
    <div class="prev-link">
        <% if (prevEntry) { %>
            <a href="/entree/<%= prevEntry.id %>" title="<%= prevEntry.title %>">
                &larr; Entrée Précédente
                <span class="prev-next-title"><%= prevEntry.title %></span>
            </a>
        <% } else { %>
            <span>&nbsp;</span> <%# Placeholder %>
        <% } %>
    </div>
    <div class="next-link">
        <% if (nextEntry) { %>
            <a href="/entree/<%= nextEntry.id %>" title="<%= nextEntry.title %>">
                Entrée Suivante &rarr;
                <span class="prev-next-title"><%= nextEntry.title %></span>
            </a>
        <% } else { %>
             <span>&nbsp;</span> <%# Placeholder %>
        <% } %>
    </div>
</nav>

<nav style="margin-top: 2rem;">
    <a href="/journal"><%= t('journal.back_to_journal') %></a>
</nav>

<%- include('partials/footer') %>