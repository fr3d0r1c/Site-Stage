<%- include('partials/header', { pageTitle: pageTitle }) %>

<div class="static-page">
    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem; margin-bottom: 2rem;">
        <h1 style="margin: 0; border: none;"><i class="fas fa-tags"></i> <%= t('admin_page.manage_tags_title') %></h1>
        <span style="background: var(--c-surface); padding: 5px 15px; border-radius: 50px; border: 1px solid var(--c-border); font-weight: bold;">
            <%= tags.length %> tags
        </span>
    </div>

    <div class="tag-create-card">
        <h3><i class="fas fa-plus-circle"></i> Nouveau Tag</h3>
        <form action="/admin/tags/create" method="POST" class="tag-form">
            <div class="form-group" style="flex-grow: 1;">
                <label>Nom du tag (Français) :</label>
                <input type="text" name="name_fr" required placeholder="Ex: Développement web" style="width: 100%;">
                <small style="color: var(--c-text-light); display: block; margin-top: 5px;">
                    <i class="fas fa-language"></i> La version anglaise sera générée automatiquement.
                </small>
            </div>
            
            <button type="submit" class="btn">Ajouter</button>
        </form>
    </div>

    <hr>

    <div class="table-wrapper">
        <table class="tags-table">
            <thead>
                <tr>
                    <th style="width: 40%;">Français</th>
                    <th style="width: 40%;">Anglais</th>
                    <th style="width: 20%; text-align: right;">Actions</th>
                </tr>
            </thead>
            <tbody>
                <% if (tags && tags.length > 0) { %>
                    <% tags.forEach(tag => { %>
                        <tr>
                            <td data-label="Français">
                                <span class="tag-pill"><%= tag.name_fr %></span>
                            </td>
                            <td data-label="Anglais">
                                <span class="tag-pill"><%= tag.name_en %></span>
                            </td>
                            <td data-label="Actions" style="text-align: right;">
                                <form action="/admin/tags/delete/<%= tag.id %>" method="POST" 
                                      data-confirm="Supprimer le tag '<%= tag.name_fr %>' ?" 
                                      style="display: inline-block;">
                                    <button type="submit" class="btn-icon-danger" title="Supprimer">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </form>
                            </td>
                        </tr>
                    <% }); %>
                <% } else { %>
                    <tr>
                        <td colspan="3" style="text-align: center; padding: 3rem; color: var(--c-text-light);">
                            <i class="fas fa-inbox fa-2x" style="margin-bottom: 10px; opacity: 0.5;"></i><br>
                            Aucun tag créé pour le moment.
                        </td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>

    <div style="margin-top: 2rem;">
        <a href="/admin" class="btn-text">&larr; Retour au Tableau de Bord</a>
    </div>
</div>

<style>
    .tag-create-card {
        background-color: var(--c-background);
        border: 1px solid var(--c-border);
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 2px 8px rgba(0,0,0,0.02);
    }
    .tag-create-card h3 {
        margin-top: 0;
        font-size: 1.1rem;
        color: var(--c-primary);
        margin-bottom: 1rem;
    }
    .tag-form {
        display: grid;
        grid-template-columns: 1fr 1fr auto;
        gap: 1.5rem;
        align-items: end;
    }
    .tag-form .form-group { margin-bottom: 0; }

    .tag-pill {
        background-color: var(--c-surface);
        border: 1px solid var(--c-border);
        padding: 4px 12px;
        border-radius: 20px;
        font-weight: 500;
        font-size: 0.9rem;
        display: inline-block;
    }

    @media (max-width: 768px) {
        .tag-form {
            grid-template-columns: 1fr; /* Tout empiler sur mobile */
            gap: 1rem;
        }
        .tag-form button { width: 100%; }
        
        /* Le tableau devient des cartes (géré par le CSS global .tags-table) */
        .tags-table td { text-align: right; }
        .tag-pill { margin-top: 5px; }
    }
</style>

<%- include('partials/footer') %>