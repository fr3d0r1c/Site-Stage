<%- include('partials/header', { pageTitle: pageTitle }) %>

<div class="static-page">
    <h1><%= t('admin_page.manage_tags_title') %></h1>

    <%# Affichage des messages Flash (succès/erreur) %>


    <%# Formulaire de création de tag (simplifié pour auto-traduction) %>
    <h2><%= t('admin_page.add_new_tag_title') %></h2>
    <form action="/admin/tags/create" method="POST" class="tag-create-form">
        <div class="form-group">
            <label for="name_fr"><%= t('admin_page.tag_name_fr') %> :</label>
            <input type="text" id="name_fr" name="name_fr" required>
            <small>Le nom anglais sera traduit automatiquement via DeepL (si configuré).</small>
        </div>
        <div>
            <button type="submit"><%= t('admin_page.add_tag_button') %></button>
        </div>
    </form>

    <hr>

    <%# Tableau des tags existants %>
    <h2><%= t('admin_page.existing_tags_title') %></h2>
    <% if (tags && tags.length > 0) { %>
        <table class="tags-table">
            <thead>
                <tr>
                    <th><%= t('admin_page.table_header_id') %></th>
                    <th><%= t('admin_page.table_header_fr') %></th>
                    <th><%= t('admin_page.table_header_en') %></th>
                    <th><%= t('admin_page.table_header_action') %></th>
                </tr>
            </thead>
            <tbody>
                <% tags.forEach(tag => { %>
                    <tr>
                        <td><%= tag.id %></td>
                        <td><%= tag.name_fr %></td>
                        <td>
                            <form action="/admin/tags/update/<%= tag.id %>" method="POST" style="display: inline-flex; gap: 5px;">
                                <input type="text" name="name_en" value="<%= tag.name_en %>" required style="padding: 5px 8px; font-size: 0.9em;">
                                <button type="submit" class="button-small"><%= t('admin_page.save_button') %></button>
                            </form>
                        </td>
                        <td>
                            <form action="/admin/tags/delete/<%= tag.id %>" method="POST" 
                                  data-confirm="<%= t('admin_page.delete_confirm') %>"
                                  style="display: inline;">
                                 <button type="submit" class="button-small button-danger"><%= t('admin_page.delete_button') %></button>
                            </form>
                        </td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    <% } else { %>
        <p><i><%= t('admin_page.no_tags') %></i></p>
    <% } %>

    <hr>
    <nav><a href="/admin"><%= t('admin_page.back_to_admin') %></a></nav>
</div>

<%- include('partials/footer') %>