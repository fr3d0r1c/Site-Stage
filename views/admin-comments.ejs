<%- include('partials/header', { pageTitle: pageTitle }) %>

<div class="static-page">
    <h1>Gestion des Commentaires</h1>

    <p>Voici l'historique de tous les commentaires publi√©s.</p>

    <% if (comments && comments.length > 0) { %>
        <table class="tags-table" style="width: 100%; table-layout: fixed;">
            <thead>
                <tr>
                    <th style="width: 20%;">Auteur / Date</th>
                    <th style="width: 45%;">Message</th>
                    <th style="width: 25%;">Article</th>
                    <th style="width: 10%;">Action</th>
                </tr>
            </thead>
            <tbody>
                <% comments.forEach(comment => { %>
                    <tr>
                        <td>
                            <strong><%= comment.author_name %></strong><br>
                            <small style="color: var(--c-gray);"><%= new Date(comment.created_at).toLocaleDateString() %></small>
                        </td>
                        <td style="word-wrap: break-word;"><%= comment.content %></td>
                        <td><a href="/entree/<%= comment.article_id %>"><%= comment.article_title %></a></td>
                        <td>
                            <form action="/admin/comments/delete/<%= comment.id %>" method="POST" 
                                  data-confirm="<%= t('admin_page.delete_confirm') %>" 
                                  style="display: inline;">
                                <button type="submit" class="button-small button-danger"><%= t('admin_page.delete_button') %></button>
                            </form>
                        </td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    <% } else { %>
        <p><i>Aucun commentaire pour le moment.</i></p>
    <% } %>

    <hr>
    <nav><a href="/admin"><%= t('admin_page.back_to_admin') %></a></nav>
</div>

<%- include('partials/footer') %>